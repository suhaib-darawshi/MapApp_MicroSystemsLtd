{"version":3,"file":"Server.js","sourceRoot":"src/","sources":["Server.ts"],"names":[],"mappings":";;;;AAAA,+BAA0B;AAC1B,iCAA+C;AAC/C,yCAAiD;AACjD,kCAAgC;AAChC,qBAAmB;AACnB,yBAAuB;AACvB,0CAAsC;AACtC,uEAAiD;AACjD,yEAAmD;AACnD,uEAAoE;AACpE,wEAAqE;AA4C9D,IAAM,MAAM,GAAZ,MAAM,MAAM;IAEP,GAAG,CAAsB;IAGzB,QAAQ,CAAgB;CACnC,CAAA;AANY,wBAAM;AAEP;IADT,IAAA,WAAM,GAAE;sCACM,4BAAmB;mCAAC;AAGzB;IADT,IAAA,kBAAa,GAAE;;wCACkB;iBALvB,MAAM;IA1ClB,IAAA,kBAAa,EAAC;QACb,GAAG,cAAM;QACT,WAAW,EAAE,CAAC,kBAAkB,CAAC;QACjC,QAAQ,EAAE,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,IAAE,MAAM,CAAC;QAC5C,SAAS,EAAE,KAAK;QAChB,qBAAqB,EAAE,IAAI;QAC3B,OAAO,EAAE;YACP,UAAU,EAAE,qCAAiB;SAC9B;QACD,KAAK,EAAE;YACL,OAAO,EAAE;gBACP,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC;aACvB;YACD,GAAG,EAAE;gBACH,GAAG,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC;aACxB;YACD,SAAS,EAAC,CAAC,yCAAmB,CAAC;SAChC;QACD,OAAO,EAAE;YACP;gBACE,IAAI,EAAE,MAAM;gBACZ,WAAW,EAAE,OAAO;aACrB;SACF;QACD,WAAW,EAAE;YACX,MAAM;YACN,eAAe;YACf,aAAa;YACb,iBAAiB;YACjB,aAAa;YACb,EAAE,GAAG,EAAE,mBAAmB,EAAE,OAAO,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,EAAC;SACzD;QACD,KAAK,EAAE;YACL,IAAI,EAAE,IAAA,WAAI,EAAC,OAAO,CAAC,GAAG,EAAE,EAAE,UAAU,CAAC;YACrC,UAAU,EAAE;gBACV,GAAG,EAAE,KAAK;aACX;SACF;QACD,OAAO,EAAE;YACP,cAAc;SACf;KACF,CAAC;GACW,MAAM,CAMlB","sourcesContent":["import {join} from \"path\";\nimport {Configuration, Inject} from \"@tsed/di\";\nimport {PlatformApplication} from \"@tsed/common\";\nimport \"@tsed/platform-express\";\nimport \"@tsed/ajv\";\nimport \"@tsed/swagger\";\nimport {config} from \"./config/index\";\nimport * as rest from \"./controllers/rest/index\";\nimport * as pages from \"./controllers/pages/index\";\nimport { MariadbDataSource } from \"./datasources/MariadbDatasource\";\nimport { CustomSocketService } from \"./services/CustomSocketService\";\n\n@Configuration({\n  ...config,\n  acceptMimes: [\"application/json\"],\n  httpPort: parseInt(process.env.PORT??\"8083\"),\n  httpsPort: false,\n  disableComponentsScan: true,\n  typeorm: {\n    dataSource: MariadbDataSource,\n  },\n  mount: {\n    \"/rest\": [\n      ...Object.values(rest)\n    ],\n    \"/\": [\n      ...Object.values(pages)\n    ],\n    \"/socket\":[CustomSocketService]\n  },\n  swagger: [\n    {\n      path: \"/doc\",\n      specVersion: \"3.0.1\"\n    }\n  ],\n  middlewares: [\n    \"cors\",\n    \"cookie-parser\",\n    \"compression\",\n    \"method-override\",\n    \"json-parser\",\n    { use: \"urlencoded-parser\", options: { extended: true }}\n  ],\n  views: {\n    root: join(process.cwd(), \"../views\"),\n    extensions: {\n      ejs: \"ejs\"\n    }\n  },\n  exclude: [\n    \"**/*.spec.ts\"\n  ]\n})\nexport class Server {\n  @Inject()\n  protected app: PlatformApplication;\n\n  @Configuration()\n  protected settings: Configuration;\n}\n"]}